<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ocg.ocgcard.dao.CardDAO">
    <resultMap id="cardResultMap" type="com.ocg.ocgcard.dataobject.Card">
        <id column="id" property="id"/>
        <result column="card_id" property="cardId"/>
        <result column="name" property="name"/>
        <result column="effect" property="effect"/>
        <result column="zz" property="zz"/>
        <result column="main_type" property="mainType"/>
        <result column="type" property="type"/>
        <result column="level" property="level"/>
        <result column="attribute" property="attribute"/>
        <result column="atk" property="atk"/>
        <result column="def" property="def"/>
    </resultMap>

    <select id="searchBylike" resultMap="cardResultMap">
        select * from ygo_card where name like concat('%',#{name},'%')
    </select>

    <select id="searchByid" resultMap="cardResultMap">
        select * from ygo_card where card_id =#{cardId}
    </select>

    <select id="randomSearch" resultMap="cardResultMap">
        SELECT * FROM ygo_card AS t1 JOIN (SELECT ROUND(RAND()*((SELECT MAX(id)
        FROM ygo_card)-(SELECT MIN(id) FROM ygo_card))+(SELECT MIN(id)
        FROM ygo_card)) AS id)AS t2 WHERE t1.id>=t2.id ORDER BY t1.id LIMIT 1;
    </select>

</mapper>